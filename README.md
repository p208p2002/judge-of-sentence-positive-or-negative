# Judge of sentence positive or negative
判斷語句的正反面情緒
> 一個練習的小專案

# 使用套件
- [fxsjy/jieba](https://github.com/fxsjy/jieba)
- [RaRe-Technologies/gensim](https://github.com/RaRe-Technologies/gensim)

# 檔案描述
Name                 |Descripition             |
---------------------|-------------------------|
JOSPON.py            |程式核心邏輯|
mid_correction.py    |中心字校正(中心字用於與其斷詞比對)|
main.py              |主程式，句子正反面情緒判斷|
testcase.py          |大量案例測試用|
testcase_no_ans.py   |大量案例測試用，無須答案|
wiki_to_txt.py       |轉換維基百科資料到txt file|
segment.py           |將維基百科資料進行斷詞|
train.py             |訓練word2vec模型|
word2vec_demo.py     |word2cev示例|

> `wiki_to_txt.py` `segment.py` `train.py` `word2vec_demo.py`
> 來自[zake7749/word2vec-tutorial](https://github.com/zake7749/word2vec-tutorial)

# 方法概述
- 使用word2vec model找出正向與負向詞庫中心詞彙
- 使用中心詞彙與句子斷詞結果比對獲得正與負分數
- 若正向分數大則判正面，反之

> 程式邏輯包含一些特殊規則解決加重語氣、雙重否定等問題，在此不詳述

# 準備
- [下載必要檔案](https://github.com/p208p2002/judge-of-sentence-positive-or-negative/releases)，放到對應名稱的資料夾底下

- 安裝套件
```
pipenv install --skip-lock
```
> 由於一些未知問題，pipenv在鎖定package可能會發生卡死，我在這裡使用`--skip-lock`跳開鎖定

> 也可以自行安裝套件(參見Pipfile)

# 測試
- -1 負面答案
- 0 中立答案
- 1 正面答案
```
今天天氣不錯，但是我的心情不好 0
['今天天氣', '不錯', '心情', '不好']
P: 145.2076941728592
[0.27158776, 0.38059244, 0.34103042, 0.45886633]
N: 162.79710829257965
[0.26506793, 0.27706715, 0.34097868, 0.7448573112487793]
=> 中立 -17.58941411972046
=> PASS

今天天氣不錯，但是我的心情非常不好 -1
['今天天氣', '不錯', '心情', '非常', '不好']
P: 145.2076941728592
[0.27158776, 0.38059244, 0.34103042, 0.0, 0.45886633]
N: 187.62568533420563
[0.26506793, 0.27706715, 0.34097868, 0.0, 0.9931430816650391]
=> 反面 -42.417991161346436
=> PASS

今天天氣不錯，但是我的心情很憤怒很不好 -1
['今天天氣', '不錯', '心情', '很', '憤怒', '很', '不好']
P: 174.42372739315033
[0.27158776, 0.38059244, 0.34103042, 0.0, 0.29216033, 0.0, 0.45886633]
N: 283.3337873220444
[0.26506793, 0.27706715, 0.34097868, 0.0, 0.9570810198783875, 0.0, 0.9931430816650391]
=> 反面 -108.91005992889404
=> PASS

你真是一個可悲的人 -1
['真是', '可悲']
P: 125.49832463264465
[0.6155569, 0.63942635]
N: 149.8730719089508
[0.5330321, 0.9656985998153687]
=> 反面 -24.374747276306152
=> PASS

我的心情不美麗 -1
['心情', '不', '美麗']
P: 45.31816765666008
[0.34103042, 0.0, 0.11215126]
N: 66.179658472538
[0.34097868, 0.0, 0.32081790268421173]
=> 反面 -20.861490815877914
=> PASS

今天玩的好開心 1
['玩', '好', '開心']
P: 74.5091125369072
[0.24389659, 0.0, 0.5011945366859436]
N: 49.78611618280411
[0.26372862, 0.0, 0.23413254]
=> 正面 24.72299635410309
=> PASS

今天玩的好不開心 1
['玩', '好不', '開心']
P: 74.5091125369072
[0.24389659, 0.0, 0.5011945366859436]
N: 49.78611618280411
[0.26372862, 0.0, 0.23413254]
=> 正面 24.72299635410309
=> PASS

今天玩的不開心 -1
['玩', '不', '開心']
P: 47.802913188934326
[0.24389659, 0.0, 0.23413254]
N: 63.96245211362839
[0.26372862, 0.0, 0.3758959025144577]
=> 反面 -16.15953892469406
=> PASS

他不是壞人 1
['不是', '壞人']
P: 89.32787775993347
[0.0, 0.8932787775993347]
N: 48.07808995246887
[0.0, 0.4807809]
=> 正面 41.2497878074646
=> PASS

我生氣 -1
['生氣']
P: 52.819883823394775
[0.52819884]
N: 98.91791939735413
[0.9891791939735413]
=> 反面 -46.09803557395935
=> PASS

我很生氣 -1
['很', '生氣']
P: 52.819883823394775
[0.0, 0.52819884]
N: 131.89055919647217
[0.0, 1.3189055919647217]
=> 反面 -79.07067537307739
=> PASS

我沒生氣 0
['沒生氣']
P: 36.63322925567627
[0.3663323]
N: 34.08319652080536
[0.34083197]
=> 中立 2.5500327348709106
=> PASS

我沒有生氣 0
['沒有', '生氣']
P: 98.91791939735413
[0.0, 0.9891791939735413]
N: 102.81988382339478
[0.5, 0.52819884]
=> 中立 -3.9019644260406494
=> PASS
```